webpackJsonp([23],{Co1g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gyMJ"),o={components:{pagination:a("spLH").a},data:function(){return{operTreeData:{},operTree:!1,treeVisablity:!1,treeData:[],loading:!1,tableData:[],tempData:{areaName:""},searchData:{},page:{pageNum:null,pageCurrent:1,pageSize:5},editorItem:{},editorVisabilty:!1,addVisabilty:!1,addItem:{}}},methods:{initData:function(e,t){var a=this;this.loading=!0,Object(i.P)({page:e||this.page.pageCurrent,size:t||this.page.pageSize,areaName:this.searchData.areaName}).then(function(e){a.tableData=e.rows,a.page.pageNum=e.count}),setTimeout(function(){a.loading=!1},500)},currentChange:function(e){this.page.pageCurrent=e,this.initData()},editorShow:function(e){this.$common.clearMessage(this.editorItem),this.editorItem=this.$common.deepCopy(e),this.editorVisabilty=!0},del:function(e){var t=this;Object(i.N)({areaCode:e}).then(function(e){t.initData()})},close:function(){this.editorVisabilty=!1,this.addVisabilty=!1,this.operTreeData={}},searchList:function(){this.searchData=this.$common.deepCopy(this.tempData),this.page.pageCurrent=1,this.initData(1)},sizeChange:function(e){this.page.pageSize=e,this.initData(1)},initTree:function(){var e=this;this.treeVisablity=!0,Object(i.O)().then(function(t){e.treeData=t})},oper:function(e,t){var a=this;1===t?(this.flag=t,this.operTreeData=this.$common.deepCopy(e),this.operTree=!0):0===t?(this.flag=t,this.operTreeData=this.$common.deepCopy(e),this.operTreeData.label="",this.operTree=!0):this.$confirm("此操作将永久删除分区信息,是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.N)({areaCode:e.id}).then(function(e){a.initTree()})})},treeOper:function(){var e=this;1===this.flag?Object(i.Q)({areaCode:this.operTreeData.id,areaName:this.operTreeData.label}).then(function(t){e.operTree=!1,e.initTree()}):Object(i.M)({pareaCode:this.operTreeData.id,levels:this.operTreeData.level+1,areaName:this.operTreeData.label}).then(function(t){e.operTree=!1,e.initTree()})}},beforeMount:function(){this.initData()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"operation"},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-input",[a("template",{slot:"prepend"},[e._v("店铺分类")])],2)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.initTree}},[e._v("新增")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"ID",prop:"areaCode",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"分区名称",prop:"areaName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"分区等级",prop:"levels",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"上级分区名称",prop:"pareaName",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){e.editorShow(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){e.del(t.row.areaCode)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("pagination",{attrs:{"current-page":e.page.pageCurrent,"page-size":e.page.pageSize,total:e.page.pageNum},on:{sizeChange:e.sizeChange,currentChange:e.currentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"店铺分区修改",visible:e.editorVisabilty,width:"30%","modal-append-to-body":!1},on:{"update:visible":function(t){e.editorVisabilty=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"分区名称"}},[a("el-input",{model:{value:e.editorItem.areaName,callback:function(t){e.$set(e.editorItem,"areaName",t)},expression:"editorItem.areaName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分区等级"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editorItem.levels,callback:function(t){e.$set(e.editorItem,"levels",t)},expression:"editorItem.levels"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分区ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editorItem.areaCode,callback:function(t){e.$set(e.editorItem,"areaCode",t)},expression:"editorItem.areaCode"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"店铺分区修改",visible:e.treeVisablity,width:"550px","modal-append-to-body":!1},on:{"update:visible":function(t){e.treeVisablity=t}}},[a("div",{staticClass:"block"},[a("el-tree",{attrs:{data:e.treeData,"node-key":"label","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,o=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(i.label))]),e._v(" "),a("span",[4!=i.level?[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){e.oper(o,0)}}},[e._v("添加子分区")])]:e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){e.oper(o,1)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){e.oper(o)}}},[e._v("删除")])],2)])}}])})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.operTree,width:"550px",center:"","modal-append-to-body":!1},on:{"update:visible":function(t){e.operTree=t}}},[a("el-form",{ref:"operTreeData",attrs:{model:e.operTreeData}},[a("el-form-item",[a("el-input",{model:{value:e.operTreeData.label,callback:function(t){e.$set(e.operTreeData,"label",t)},expression:"operTreeData.label"}},[a("template",{slot:"prepend"},[e._v("分区名称")])],2)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success"},on:{click:e.treeOper}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(o,r,!1,function(e){a("S+Qx")},null,null);t.default=n.exports},"S+Qx":function(e,t){}});
//# sourceMappingURL=23.269334a647e460c2fa19.js.map