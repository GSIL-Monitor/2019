{"version":3,"sources":["webpack:///src/views/gover/roleMessage.vue","webpack:///./src/views/gover/roleMessage.vue?0649","webpack:///./src/views/gover/roleMessage.vue"],"names":["roleMessage","components","pagination","data","rule","roleName","required","message","tigger","disable","defaultProps","children","label","loading2","page","pageNum","currentPage","pageSize","tempData","serData","editorRoleData","id","visability","description","editorData","dataList","selectedList","addRoleData","roleDataList","allDataList","methods","searchList","this","$common","deepCopy","initData","submit","_this","$refs","validate","valid","console","log","api","editorRoleMessage","then","res","msg","$message","success","clearMessage","close","sizeChange","val","currentChange","editor","_this2","that","limitList","sysRoleId","initList","tree","setCheckedNodes","clearTree","changeRight","_this3","sysMenuIds","getCheckedNodes","forEach","item","push","editorRole","option","obj","text","open","state","selected","replaceList","replace","add","_this4","promise_default","a","resolve","reject","setTimeout","del","index","_this5","delRole","splice","error","upLoad","_this6","addRole","keys_default","size","_this7","roleList","rows","count","beforeMount","gover_roleMessage","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","model","value","callback","$$v","$set","expression","slot","_v","staticStyle","margin-left","type","icon","on","click","directives","name","rawName","width","align","prop","scopedSlots","_u","key","fn","scope","disabled","$event","row","$index","current-page","page-size","total","placement","visible","title","transition","modal-append-to-body","show-close","placeholder","setChecked","ref","accordion","show-checkbox","node-key","highlight-current","props","rules","con","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/9.4037694aace8f5dff51f.js","sourcesContent":["<template>\r\n    <div class=\"content clearfix roleMessage\">\r\n    <div class=\"operation\">\r\n        <el-row>\r\n            <el-col :span=\"8\">\r\n                    <el-input v-model=\" tempData.roleName\">\r\n                        <template slot=\"prepend\">角色名称</template>\r\n                    </el-input>\r\n            </el-col>\r\n             <el-button type=\"info\" style=\"margin-left:50px;\" @click=\"searchList\" icon=\"el-icon-search\">查询</el-button>\r\n             <el-button type=\"primary\" @click=\"add\" icon=\"el-icon-plus\">添加</el-button>\r\n        </el-row>\r\n    </div>\r\n    <div class=\"table\">\r\n        <el-table class=\"mgt20\"\r\n                :data=\"roleDataList\"\r\n                v-loading=\"loading2\">\r\n               <el-table-column\r\n               label=\"序号\"\r\n               type=\"index\"\r\n               width=\"150\"\r\n               align=\"center\">\r\n\r\n               </el-table-column>\r\n               <el-table-column\r\n               label=\"角色名称\"\r\n               prop=\"roleName\">\r\n\r\n               </el-table-column>\r\n               <el-table-column\r\n               label=\"权限设置\"\r\n               >\r\n               <template slot-scope=\"scope\">\r\n                      <el-button type=\"primary\" icon=\"el-icon-edit\" @click=\"editor(scope.row.id)\" :disabled=\"disable\" >权限设置</el-button>\r\n               </template>\r\n               </el-table-column>\r\n               <el-table-column\r\n                  label=\"操作\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-button type=\"primary\" icon=\"el-icon-edit\" @click=\"editorRoleMessage(scope.row.id,scope.row.roleName,scope.row.description)\">编辑</el-button>\r\n                                <el-button type=\"danger\" icon=\"el-icon-delete\" @click=\"del(scope.row.id,scope.row.$index)\">删除</el-button>\r\n                            </template>\r\n               </el-table-column>\r\n        </el-table>\r\n      </div>\r\n         <pagination :current-page=\"page.currentPage\"\r\n                     :page-size=\"page.pageSize\"\r\n                     :total=\"page.pageNum\"\r\n                     @sizeChange=\"sizeChange\"\r\n                     @currentChange=\"currentChange\"\r\n         >\r\n         </pagination>\r\n                <el-dialog\r\n                        placement=\"top-start\"\r\n                        width=\"400px\"\r\n                        :visible=\"addRoleData.visability\"\r\n                        title=\"添加角色\"\r\n                        transition=\"fade-in-linear\"\r\n                        :modal-append-to-body=\"false\"\r\n                        :show-close=\"false\"\r\n                        >\r\n                          <el-row>\r\n                            <el-col :span=\"18\">\r\n                            <el-input  v-model=\"addRoleData.roleName\">\r\n                              <template slot=\"prepend\"  placeholder=\"不能为空\">角色名称</template>\r\n                            </el-input>\r\n                            </el-col>\r\n                          </el-row>\r\n                          <el-row class=\"mgt20\">\r\n                            <el-col :span=\"24\">\r\n                                    <el-input\r\n                                    type=\"textarea\"\r\n                                    size=\"medium\"\r\n                                    placeholder=\"请输入对该角色的描述(可以为空)\"\r\n                                    v-model=\"addRoleData.description\" >\r\n                                    </el-input>\r\n                              </el-col>\r\n                          </el-row>\r\n                          <div class=\"mgt20 button-box\" >\r\n                                    <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"upLoad\">上传</el-button>\r\n                                    <el-button type=\"danger\" icon=\"el-icon-delete\" @click=\"clearMessage(addRoleData)\">清空</el-button>\r\n                                    <el-button type=\"warning\" @click=\"close\">关闭</el-button>\r\n                          </div>\r\n                 </el-dialog>\r\n                  <el-dialog\r\n                      placement=\"top-start\"\r\n                      width=\"600px\"\r\n                      :visible=\"editorData.visability\"\r\n                      title=\"角色权限编辑\"\r\n                      transition=\"fade-in-linear\"\r\n                      :modal-append-to-body=\"false\"\r\n                      :show-close=\"false\"\r\n                      setChecked=\"node\"\r\n                    >\r\n                  <el-tree\r\n                      accordion\r\n                      :data=\"editorData.dataList\"\r\n                      show-checkbox\r\n                      node-key=\"id\"\r\n                      ref=\"tree\"\r\n                      highlight-current\r\n                      :props=\"defaultProps\">\r\n                    </el-tree>\r\n                      <div class=\"mgt20 button-box\" >\r\n                              <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"changeRight\">保存信息</el-button>\r\n                              <el-button type=\"danger\" icon=\"el-icon-delete\" @click=\"clearTree\">清空</el-button>\r\n                              <el-button type=\"warning\" @click=\"close\">关闭</el-button>\r\n                    </div>\r\n          </el-dialog>\r\n            <el-dialog\r\n                      placement=\"top-start\"\r\n                      width=\"400\"\r\n                      :visible=\"editorRoleData.visability\"\r\n                      title=\"角色权限编辑\"\r\n                      transition=\"fade-in-linear\"\r\n                      :modal-append-to-body=\"false\"\r\n                      :show-close=\"false\"\r\n                      setChecked=\"node\"\r\n            > \r\n              <el-row>\r\n                          <el-form :model=\"editorRoleData\" ref=\"editorForm\" :rules=\"rule\">\r\n                                <el-form-item>\r\n                                  <el-col :span=\"18\">\r\n                                      <el-input  v-model=\"editorRoleData.id\" disabled>\r\n                                        <template slot=\"prepend\"  placeholder=\"不能为空\">角色id</template>\r\n                                      </el-input>\r\n                              </el-col>\r\n                                </el-form-item>\r\n                         <el-form-item prop=\"roleName\">\r\n                                <el-col :span=\"18\" class=\"mgt20  clearfix\">\r\n                                        <el-input  v-model=\" editorRoleData.roleName\">\r\n                                          <template slot=\"prepend\"  placeholder=\"不能为空\">角色名称</template>\r\n                                        </el-input>\r\n                                </el-col>                           \r\n                         </el-form-item>\r\n                                    <el-input\r\n                                      class=\"mgt20\"\r\n                                      type=\"textarea\"\r\n                                      size=\"medium\"\r\n                                      placeholder=\"请输入对该角色的描述(可以为空)\"\r\n                                      v-model=\"editorRoleData.description\" >\r\n                                    </el-input>\r\n                          <div class=\"mgt20 button-box\" >\r\n                                    <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"submit\">上传</el-button>\r\n                                    <!-- <el-button type=\"danger\" i @click=\"clearMessage(editorRoleData)\">清空</el-button> -->\r\n                                    <el-button type=\"danger\" con=\"el-icon-delete\" @click=\"close\">关闭</el-button>\r\n                          </div>\r\n                          </el-form>\r\n                   </el-row>\r\n\r\n            </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { admin } from \"@/api/index.js\";\r\nimport pagination from \"@/components/pagination\";\r\nexport default {\r\n  components: {\r\n    pagination\r\n  },\r\n  data() {\r\n    return {\r\n      rule: {\r\n        roleName: [\r\n          { required: true, message: \"请输入角色名称\", tigger: \"blur\" }\r\n        ]\r\n      },\r\n      disable: false,\r\n      // 树形图配置\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\"\r\n      },\r\n      // 页数信息\r\n      loading2: true,\r\n      page: {\r\n        pageNum: 10,\r\n        currentPage: 1,\r\n        pageSize: 5\r\n      },\r\n      tempData: {},\r\n      // 搜索信息\r\n      serData: {\r\n        roleName: \"\"\r\n      },\r\n      // 角色内容编辑\r\n      editorRoleData: {\r\n        id: \"\",\r\n        visability: false,\r\n        roleName: \"\",\r\n        description: \"\"\r\n      },\r\n      // 角色权限编辑\r\n      editorData: {\r\n        id: \"\",\r\n        visability: false,\r\n        dataList: [],\r\n        selectedList: []\r\n      },\r\n      // 添加角色信息\r\n      addRoleData: {\r\n        visability: false,\r\n        roleName: \"\",\r\n        description: \"\"\r\n      },\r\n      roleDataList: [],\r\n      allDataList: []\r\n    };\r\n  },\r\n  methods: {\r\n    searchList() {\r\n      this.serData = this.$common.deepCopy(this.tempData);\r\n      this.page.currentPage = 1;\r\n      this.initData(1);\r\n    },\r\n    submit() {\r\n      this.$refs[\"editorForm\"].validate(valid => {\r\n        console.log(valid)\r\n        if (valid) {\r\n\r\n          admin\r\n            .editorRoleMessage({\r\n              id: this.editorRoleData.id,\r\n              description: this.editorRoleData.description,\r\n              roleName: this.editorRoleData.roleName\r\n            })\r\n            .then(res => {\r\n              if (res.msg === \"success\") {\r\n                this.$message.success(\"修改信息成功\");\r\n                this.clearMessage(this.editorRoleData);\r\n                this.close();\r\n                this.initData();\r\n              } else {\r\n                this.$message(\"修改信息失败\");\r\n              }\r\n            });\r\n        } else {\r\n          return;\r\n        }\r\n      });\r\n    },\r\n    // 改变当前页面显示数量触发的方法\r\n    sizeChange(val) {\r\n      this.page.pageSize = val;\r\n      this.page.currentPage = 1;\r\n      this.initData(1);\r\n    },\r\n    currentChange(val) {\r\n      this.page.currentPage = val;\r\n      this.initData();\r\n    },\r\n    // 编辑角色的权限\r\n    editor(id) {\r\n      var that = this;\r\n      that.editorData.id = id;\r\n      admin\r\n        .limitList({ sysRoleId: id })\r\n        .then(res => {\r\n          let contanier = [];\r\n          that.initList(res);\r\n          that.editorData.visability = true;\r\n        })\r\n        .then(() => {\r\n          that.$refs.tree.setCheckedNodes(this.editorData.selectedList);\r\n        });\r\n    },\r\n    clearTree() {\r\n      this.$refs.tree.setCheckedNodes([]);\r\n    },\r\n    // 改变角色权限\r\n    changeRight() {\r\n      let sysMenuIds = [];\r\n      this.$refs.tree.getCheckedNodes().forEach(item => {\r\n        sysMenuIds.push(item.id);\r\n      });\r\n      admin\r\n        .editorRole({\r\n          id: this.editorData.id,\r\n          sysMenuIds\r\n        })\r\n        .then(res => {\r\n            this.close();\r\n        });\r\n    },\r\n    // 写的不好,抽空用递归重写 (修改角色权限TREE的数据格式)\r\n    initList(option) {\r\n      var that = this;\r\n      let list = option.children;\r\n      list.forEach(function(item) {\r\n        let obj = {\r\n          label: item.text,\r\n          id: item.id,\r\n          children: item.children,\r\n          open: item.state.selected\r\n        };\r\n        that.editorData.dataList.push(obj);\r\n      });\r\n      that.editorData.dataList.forEach(function(item) {\r\n        let obj = item.children;\r\n        let replaceList = [];\r\n        obj.forEach(function(item) {\r\n          let replace = {\r\n            label: item.text,\r\n            id: item.id,\r\n            open: item.state.selected\r\n          };\r\n          if (replace.open === true) {\r\n            that.editorData.selectedList.push(replace);\r\n          }\r\n          replaceList.push(replace);\r\n        });\r\n        item.children = replaceList;\r\n      });\r\n    },\r\n    // 打开添加角色窗口\r\n    add() {\r\n      this.addRoleData.visability = true;\r\n    },\r\n    // 关闭窗口\r\n    close() {\r\n      var that = this;\r\n      this.clearMessage(this.addRoleData);\r\n      new Promise((resolve, reject) => {\r\n        that.editorRoleData.visability = false;\r\n        that.addRoleData.visability = false;\r\n        that.editorData.visability = false;\r\n        that.disable = true;\r\n        setTimeout(() => {\r\n          resolve();\r\n        }, 1000);\r\n      }).then(() => {\r\n        that.disable = false;\r\n        this.editorData.selectedList = [];\r\n        this.editorData.dataList = [];\r\n      });\r\n    },\r\n    del(id, index) {\r\n      var that = this;\r\n      admin.delRole({ id }).then(res => {\r\n        if (res.msg === \"success\") {\r\n          this.roleDataList.splice(index, 1);\r\n          that.$message.success(\"删除成功\");\r\n        } else {\r\n          that.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n    // 添加新角色\r\n    upLoad() {\r\n      var that = this;\r\n      if (this.addRoleData.roleName === \"\") {\r\n        this.$message.error(\"角色名不能为空\");\r\n      } else {\r\n        admin\r\n          .addRole({\r\n            roleName: this.addRoleData.roleName,\r\n            description: this.addRoleData.description\r\n          })\r\n          .then(res => {\r\n              this.clearMessage(this.addRoleData);\r\n              this.close();\r\n              that.initData();\r\n          });\r\n      }\r\n    },\r\n    // 编辑角色信息\r\n    editorRoleMessage(id, roleName, description) {\r\n      this.editorRoleData.id = id;\r\n      this.editorRoleData.roleName = roleName;\r\n      this.editorRoleData.description = description;\r\n      this.editorRoleData.visability = true;\r\n    },\r\n    // 关闭窗口时清除信息\r\n    clearMessage(obj) {\r\n      var arr = Object.keys(obj);\r\n      arr.forEach(function(item) {\r\n        obj[item] = \"\";\r\n      });\r\n    },\r\n    // 翻页 添加 删除 时初始化信息\r\n    initData(page, size) {\r\n      var that = this;\r\n      that.loading2 = true;\r\n      admin\r\n        .roleList({\r\n          page: page || this.page.currentPage,\r\n          size: size || this.page.pageSize,\r\n          roleName: that.serData.roleName\r\n        })\r\n        .then(res => {\r\n          this.roleDataList = res.rows;\r\n          this.page.pageNum = res.count;\r\n        })\r\n        .then(() => {\r\n          setTimeout(function() {\r\n            that.loading2 = false;\r\n          }, 500);\r\n        });\r\n    }\r\n  },\r\n\r\n  beforeMount() {\r\n    this.initData();\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.button-box {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.content {\r\n  background: rgb(255, 255, 255);\r\n  padding: 26px 30px;\r\n  position: relative;\r\n}\r\n.el-tree-node {\r\n  margin-bottom: 15px;\r\n}\r\n/deep/ .el-dialog__header {\r\n  border-bottom: 1px solid #666666;\r\n}\r\n/deep/ .el-tree-node__content {\r\n  margin-bottom: 5px;\r\n  .el-tree-node__label {\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/gover/roleMessage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content clearfix roleMessage\"},[_c('div',{staticClass:\"operation\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{model:{value:( _vm.tempData.roleName),callback:function ($$v) {_vm.$set(_vm.tempData, \"roleName\", $$v)},expression:\" tempData.roleName\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"角色名称\")])],2)],1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"type\":\"info\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchList}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.add}},[_vm._v(\"添加\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"table\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading2),expression:\"loading2\"}],staticClass:\"mgt20\",attrs:{\"data\":_vm.roleDataList}},[_c('el-table-column',{attrs:{\"label\":\"序号\",\"type\":\"index\",\"width\":\"150\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"权限设置\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"disabled\":_vm.disable},on:{\"click\":function($event){_vm.editor(scope.row.id)}}},[_vm._v(\"权限设置\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){_vm.editorRoleMessage(scope.row.id,scope.row.roleName,scope.row.description)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.del(scope.row.id,scope.row.$index)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('pagination',{attrs:{\"current-page\":_vm.page.currentPage,\"page-size\":_vm.page.pageSize,\"total\":_vm.page.pageNum},on:{\"sizeChange\":_vm.sizeChange,\"currentChange\":_vm.currentChange}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"placement\":\"top-start\",\"width\":\"400px\",\"visible\":_vm.addRoleData.visability,\"title\":\"添加角色\",\"transition\":\"fade-in-linear\",\"modal-append-to-body\":false,\"show-close\":false}},[_c('el-row',[_c('el-col',{attrs:{\"span\":18}},[_c('el-input',{model:{value:(_vm.addRoleData.roleName),callback:function ($$v) {_vm.$set(_vm.addRoleData, \"roleName\", $$v)},expression:\"addRoleData.roleName\"}},[_c('template',{attrs:{\"placeholder\":\"不能为空\"},slot:\"prepend\"},[_vm._v(\"角色名称\")])],2)],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mgt20\"},[_c('el-col',{attrs:{\"span\":24}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"size\":\"medium\",\"placeholder\":\"请输入对该角色的描述(可以为空)\"},model:{value:(_vm.addRoleData.description),callback:function ($$v) {_vm.$set(_vm.addRoleData, \"description\", $$v)},expression:\"addRoleData.description\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"mgt20 button-box\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\"},on:{\"click\":_vm.upLoad}},[_vm._v(\"上传\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.clearMessage(_vm.addRoleData)}}},[_vm._v(\"清空\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.close}},[_vm._v(\"关闭\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"placement\":\"top-start\",\"width\":\"600px\",\"visible\":_vm.editorData.visability,\"title\":\"角色权限编辑\",\"transition\":\"fade-in-linear\",\"modal-append-to-body\":false,\"show-close\":false,\"setChecked\":\"node\"}},[_c('el-tree',{ref:\"tree\",attrs:{\"accordion\":\"\",\"data\":_vm.editorData.dataList,\"show-checkbox\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"mgt20 button-box\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\"},on:{\"click\":_vm.changeRight}},[_vm._v(\"保存信息\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":_vm.clearTree}},[_vm._v(\"清空\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.close}},[_vm._v(\"关闭\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"placement\":\"top-start\",\"width\":\"400\",\"visible\":_vm.editorRoleData.visability,\"title\":\"角色权限编辑\",\"transition\":\"fade-in-linear\",\"modal-append-to-body\":false,\"show-close\":false,\"setChecked\":\"node\"}},[_c('el-row',[_c('el-form',{ref:\"editorForm\",attrs:{\"model\":_vm.editorRoleData,\"rules\":_vm.rule}},[_c('el-form-item',[_c('el-col',{attrs:{\"span\":18}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editorRoleData.id),callback:function ($$v) {_vm.$set(_vm.editorRoleData, \"id\", $$v)},expression:\"editorRoleData.id\"}},[_c('template',{attrs:{\"placeholder\":\"不能为空\"},slot:\"prepend\"},[_vm._v(\"角色id\")])],2)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"roleName\"}},[_c('el-col',{staticClass:\"mgt20  clearfix\",attrs:{\"span\":18}},[_c('el-input',{model:{value:( _vm.editorRoleData.roleName),callback:function ($$v) {_vm.$set(_vm.editorRoleData, \"roleName\", $$v)},expression:\" editorRoleData.roleName\"}},[_c('template',{attrs:{\"placeholder\":\"不能为空\"},slot:\"prepend\"},[_vm._v(\"角色名称\")])],2)],1)],1),_vm._v(\" \"),_c('el-input',{staticClass:\"mgt20\",attrs:{\"type\":\"textarea\",\"size\":\"medium\",\"placeholder\":\"请输入对该角色的描述(可以为空)\"},model:{value:(_vm.editorRoleData.description),callback:function ($$v) {_vm.$set(_vm.editorRoleData, \"description\", $$v)},expression:\"editorRoleData.description\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mgt20 button-box\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\"},on:{\"click\":_vm.submit}},[_vm._v(\"上传\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"con\":\"el-icon-delete\"},on:{\"click\":_vm.close}},[_vm._v(\"关闭\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d2222a3a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/gover/roleMessage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d2222a3a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./roleMessage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleMessage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleMessage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d2222a3a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./roleMessage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d2222a3a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/gover/roleMessage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}