webpackJsonp([27],{"5W4H":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("spLH"),l=a("gyMJ"),i={components:{pagination:o.a},data:function(){return{statusList:[{label:"开启",value:0},{label:"不开启",value:1}],typeList:[{label:"普通红包",value:0},{label:"会员红包",value:1}],rules:{name:[{required:!0,message:"请输入优惠券名称",tigger:"blur"}],effectiveDate:[{required:!0,message:"请输入优惠券有效日期",tigger:"blur"}],openStatus:[{type:"number",required:!0,message:"请选择开启状态",tigger:"change"}],amount:[{type:"number",required:!0,message:"请输入正确优惠金额",tigger:"blur"},{pattern:/^[0-9]+$/,message:"请输入正确优惠金额",tigger:"blur"}],sumCondition:[{type:"number",required:!1,message:"请输入门槛金额",tigger:"input"},{pattern:/^[0-9]*$/,message:"请输入正确门槛金额",tigger:"input"}],hongbaoType:[{type:"number",required:!0,message:"请选择红包类型",tigger:"change"}]},tempData:{},addItem:{},editorItem:{},editorVisabilty:!1,addVisabilty:!1,loading:!1,tableData:[],editorShow:function(e){this.editorItem=this.$common.deepCopy(e),this.editorVisabilty=!0},page:{pageNum:10,currentPage:1,pageSize:5}}},methods:{initData:function(e,t){var a=this;this.loading=!0,l.j.couponList({page:e||this.page.currentPage,size:t||this.page.pageSize}).then(function(e){a.tableData=e.rows,a.page.pageNum=e.count}),setTimeout(function(){a.loading=!1},500)},addShow:function(){this.$common.clearMessage(this.addItem),this.addVisabilty=!0},del:function(e){var t=this;l.j.delCounpon({id:e}).then(function(e){t.initData()})},close:function(){this.editorVisabilty=!1,this.addVisabilty=!1},currentChange:function(e){this.page.currentPage=e,this.initData()},sizeChange:function(e){this.page.pageSize=e,this.initData()},submit:function(e){var t=this;this.$refs[e].validate(function(a){a&&("addForm"==e?l.j.addCounpon(t.addItem).then(function(e){t.close()}):l.j.editorCounpon(t.editorItem).then(function(e){t.close(),t.initData()}))})}},watch:{editorItem:function(e){console.log(e)}},beforeMount:function(){this.initData()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content coupon"},[a("div",{staticClass:"operation"},[a("el-button",{staticClass:"mgt20",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addShow}},[e._v("添加优惠券")])],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"优惠券名称",prop:"name",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"优惠券类型",prop:"hongbaoType",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.hongbaoType?"普通红包":"会员红包"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"description",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"门槛金额",prop:"sumCondition",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"优惠金额",prop:"amount",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"有效日期",prop:"effectiveDate",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"开启状态",prop:"openStatus",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.openStatus?"不开启":"开启"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.editorShow(t.row)}}},[e._v("编辑详情")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("pagination",{attrs:{"current-page":e.page.currentPage,"page-size":e.page.pageSize,total:e.page.pageNum},on:{sizeChange:e.sizeChange,currentChange:e.currentChange}}),e._v(" "),a("el-dialog",{ref:"addForm",attrs:{title:"优惠券添加",visible:e.addVisabilty,width:"550px","modal-append-to-body":!1},on:{"update:visible":function(t){e.addVisabilty=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addItem,rules:e.rules}},[a("el-form-item",{attrs:{label:"优惠券名称",prop:"name"}},[a("el-input",{model:{value:e.addItem.name,callback:function(t){e.$set(e.addItem,"name",t)},expression:"addItem.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠券描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.addItem.description,callback:function(t){e.$set(e.addItem,"description",t)},expression:"addItem.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠卷类型",prop:"hongbaoType"}},[a("el-select",{model:{value:e.addItem.hongbaoType,callback:function(t){e.$set(e.addItem,"hongbaoType",t)},expression:"addItem.hongbaoType"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"有效日期",prop:"effectiveDate"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"选择有效日期"},model:{value:e.addItem.effectiveDate,callback:function(t){e.$set(e.addItem,"effectiveDate",t)},expression:"addItem.effectiveDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开启状态",prop:"openStatus"}},[a("el-select",{model:{value:e.addItem.openStatus,callback:function(t){e.$set(e.addItem,"openStatus",t)},expression:"addItem.openStatus"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"优惠金额",prop:"amount"}},[a("el-input",{model:{value:e.addItem.amount,callback:function(t){e.$set(e.addItem,"amount",e._n(t))},expression:"addItem.amount"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"门槛金额",prop:"sumCondition"}},[a("el-input",{attrs:{placeholder:"若不输入则为0"},model:{value:e.addItem.sumCondition,callback:function(t){e.$set(e.addItem,"sumCondition",e._n(t))},expression:"addItem.sumCondition"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisabilty=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("addForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑优惠券",visible:e.editorVisabilty,width:"550px","modal-append-to-body":!1},on:{"update:visible":function(t){e.editorVisabilty=t}}},[a("el-form",{ref:"editorForm",attrs:{model:e.editorItem,rules:e.rules}},[a("el-form-item",{attrs:{label:"优惠券名称",prop:"name"}},[a("el-input",{model:{value:e.editorItem.name,callback:function(t){e.$set(e.editorItem,"name",t)},expression:"editorItem.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠券描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editorItem.description,callback:function(t){e.$set(e.editorItem,"description",t)},expression:"editorItem.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠卷类型",prop:"hongbaoType"}},[a("el-select",{model:{value:e.editorItem.hongbaoType,callback:function(t){e.$set(e.editorItem,"hongbaoType",t)},expression:"editorItem.hongbaoType"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"有效日期",prop:"effectiveDate"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择有效日期"},model:{value:e.editorItem.effectiveDate,callback:function(t){e.$set(e.editorItem,"effectiveDate",t)},expression:"editorItem.effectiveDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开启状态",prop:"openStatus"}},[a("el-select",{model:{value:e.editorItem.openStatus,callback:function(t){e.$set(e.editorItem,"openStatus",t)},expression:"editorItem.openStatus"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"优惠金额",prop:"amount"}},[a("el-input",{model:{value:e.editorItem.amount,callback:function(t){e.$set(e.editorItem,"amount",e._n(t))},expression:"editorItem.amount"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"门槛金额",prop:"sumCondition"}},[a("el-input",{attrs:{placeholder:"若不输入则为0"},model:{value:e.editorItem.sumCondition,callback:function(t){e.$set(e.editorItem,"sumCondition",e._n(t))},expression:"editorItem.sumCondition"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editorVisabilty=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("editorForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(e){a("UUqX")},null,null);t.default=r.exports},UUqX:function(e,t){}});
//# sourceMappingURL=27.38c59fd15b48d01b925a.js.map